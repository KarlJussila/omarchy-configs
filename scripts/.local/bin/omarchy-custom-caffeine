#!/bin/bash
# Omarchy-style caffeine toggle (kill/restart hypridle cleanly)

STATE_FILE="$HOME/.cache/omarchy-caffeine"
ICON_ON="â˜•"
ICON_OFF="ðŸ’¤"

if [ -f "$STATE_FILE" ]; then
  # Disable caffeine (restart hypridle)
  rm -f "$STATE_FILE"
  if pgrep -x hypridle >/dev/null; then
    pkill -x hypridle
  fi
  hyprctl dispatch exec "hypridle &"
  notify-send "$ICON_OFF Sleep & lock restored"
else
  # Enable caffeine (kill hypridle)
  touch "$STATE_FILE"
  if pgrep -x hypridle >/dev/null; then
    pkill -x hypridle
  fi
  notify-send "$ICON_ON Sleep & lock disabled"
fi

